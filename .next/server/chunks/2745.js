exports.id=2745,exports.ids=[2745],exports.modules={55672:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,26840,23)),Promise.resolve().then(a.t.bind(a,38771,23)),Promise.resolve().then(a.t.bind(a,13225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,43982,23))},40895:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,31900,23)),Promise.resolve().then(a.bind(a,24724)),Promise.resolve().then(a.bind(a,26675))},24724:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(95344),s=a(8428),n=a(10788),i=a.n(n),o=a(62225),c=a(10372);let l=()=>{let e=(0,s.usePathname)();return(0,r.jsxs)("div",{className:i().container,children:[r.jsx("div",{className:i().title,children:e.split("/").pop()}),(0,r.jsxs)("div",{className:i().menu,children:[(0,r.jsxs)("div",{className:i().search,children:[r.jsx(o.G,{icon:c.wn1}),r.jsx("input",{type:"text",placeholder:"Search...",className:i().input})]}),(0,r.jsxs)("div",{className:i().icons,children:[r.jsx(o.G,{icon:c.Mzg}),r.jsx(o.G,{icon:c.qmU}),r.jsx(o.G,{icon:c.g4A})]})]})]})}},26675:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(95344),s=a(56506),n=a(33330),i=a.n(n),o=a(8428);let c=({item:e})=>{let t=(0,o.usePathname)();return(0,r.jsxs)(s.default,{href:e.path,className:`${i().container} ${t===e.path&&i().active}`,children:[e.icon,e.title]})}},7351:e=>{e.exports={container:"dashboard_container__t8zYa",menu:"dashboard_menu__VR_DR",content:"dashboard_content__vzRe4",wrapper:"dashboard_wrapper__33N_D",main:"dashboard_main__UasCQ",cards:"dashboard_cards__v7thb",side:"dashboard_side__t3OOV"}},1940:e=>{e.exports={container:"footer_container__TjdSz",logo:"footer_logo__qsO15",text:"footer_text__BJPvP"}},10788:e=>{e.exports={container:"navbar_container__HTsUW",title:"navbar_title__3BnDi",menu:"navbar_menu__LjXHm",search:"navbar_search__8Cg5n",input:"navbar_input__gHmlh",icons:"navbar_icons__R904f"}},33330:e=>{e.exports={container:"menuLink_container__r_ieM",active:"menuLink_active__gVNIt"}},20289:e=>{e.exports={container:"sidebar_container__NROta",user:"sidebar_user__jau4D",userImage:"sidebar_userImage__nehNt",userDetail:"sidebar_userDetail__D_xbM",username:"sidebar_username__8VNtu",userTitle:"sidebar_userTitle__9A3B3",list:"sidebar_list__PC7h_",cat:"sidebar_cat__m6NB2",logout:"sidebar_logout__Laf_J"}},4545:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x,metadata:()=>p});var r=a(25036);let s=(0,a(86843).createProxy)(String.raw`/Users/anvarinho/Desktop/next-app/frontend/src/app/admin/ui/dashboard/navbar/navbar.tsx`),{__esModule:n,$$typeof:i}=s,o=s.default;var c=a(20937),l=a(7351),d=a.n(l),u=a(1940),m=a.n(u);let h=()=>(0,r.jsxs)("div",{className:m().container,children:[r.jsx("div",{className:m().logo,children:"GuideBook of Kyrgyzstan"}),r.jsx("div",{className:m().text,children:"\xa9 All rights reserved."})]});a(33709);var _=a(867),f=a(45813);let p={title:"Admin Dashboard",description:"GuideBook of Kyrgyzstan"};function x({children:e}){let t=(0,f.A)();return t||(console.log(t),console.log("is not an admin"),(0,_.redirect)("/login")),r.jsx("html",{lang:"en",children:r.jsx("body",{children:(0,r.jsxs)("div",{className:d().container,children:[r.jsx("div",{className:d().menu,children:r.jsx(c.default,{})}),(0,r.jsxs)("div",{className:d().content,children:[r.jsx(o,{}),e,r.jsx(h,{})]})]})})})}},46999:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>l,$$ACTION_1:()=>u,$$ACTION_2:()=>_,cards:()=>b,readArticle:()=>p,readArticles:()=>d,readPlace:()=>f,readPlaces:()=>o,readStats:()=>m,readTour:()=>x,readTours:()=>c,readUser:()=>v,readUsers:()=>h});var r=a(31542);a(68616);var s=a(38013);let n=null;async function i(){if(n)return n;let e=await s.MongoClient.connect("mongodb://localhost:27017",{useNewUrlParser:!0,useUnifiedTopology:!0}),t=await e.db("my_database");return n=t,console.log("Connected:",t.databaseName),t}async function o(e="",t=1){let a=(await i()).collection("places"),r={"name.en":{$regex:RegExp(e,"i")}};return{count:await a.find(r).count(),places:await a.find(r).skip((t-1)*20).limit(20).toArray()}}var c=(0,r.j)("7887c420b90f12870057560ac89522fdc805deca",l);async function l(e=""){let t=(await i()).collection("tours"),a=RegExp(e,"i");return{count:await t.find({title:a}).length,places:await t.find({title:a}).toArray()}}var d=(0,r.j)("159ee0174499961c11b887d7d73343bf30702474",u);async function u(){let e=(await i()).collection("articles");return{count:await e.find().length,places:await e.find().sort({createdAt:-1}).toArray()}}async function m(){let e=(await i()).collection("statistics");return{count:await e.countDocuments(),places:(await e.find().sort({timestamp:-1}).toArray()).map(e=>{let t=e.query&&e.query.lang?e.query.lang:"",a=e.requestHeaders?e.requestHeaders["user-agent"]:"";return{id:e._id,lang:t,sessionID:e.sessionID,route:e.route,userAgent:a,statusCode:e.statusCode,timestamp:e.timestamp,ip:e.remoteAddress}})}}var h=(0,r.j)("f3af1cd87851b26ac8d741718bbc71fea90c0f90",_);async function _(){let e=(await i()).collection("users");return{count:await e.find().length,places:await e.find().toArray()}}async function f(e){let t=(await i()).collection("places");try{let a=await t.findOne({url:e});if(!a)throw Error("Place not found");return a}catch(e){throw Error("Error fetching place by ID")}}async function p(e){let t=(await i()).collection("articles");try{let a=await t.findOne({url:e});if(!a)throw Error("Place not found");return a}catch(e){throw Error("Error fetching place by ID")}}async function x(e){let t=(await i()).collection("tours");try{let a=await t.findOne({url:e});if(!a)throw Error("Place not found");return a}catch(e){throw Error("Error fetching place by ID")}}async function v(e){let t=(await i()).collection("users");try{let a=await t.findOne({_id:new s.ObjectId(e)});if(!a)throw Error("User not found");return a}catch(e){throw console.error("Error fetching user by ID:",e.message),Error("Error fetching user by ID")}}let b=[{id:1,title:"Total Users",number:10.928,change:12},{id:2,title:"Stock",number:8.236,change:-2},{id:3,title:"Revenue",number:6.642,change:18}]},20937:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>v,default:()=>b});var r=a(25036),s=a(31542);a(68616);var n=a(2813);let i=(0,a(86843).createProxy)(String.raw`/Users/anvarinho/Desktop/next-app/frontend/src/app/admin/ui/dashboard/sidebar/menuLink/menuLink.jsx`),{__esModule:o,$$typeof:c}=i,l=i.default;var d=a(20289),u=a.n(d),m=a(57984),h=a(46951),_=a(45813);a(40002);var f=a(46999),p=a(7439);let x=[{title:"Pages",list:[{title:"Dashboard",path:"/admin",icon:r.jsx(m.G,{icon:h.HLz,size:"sm"})},{title:"Users",path:"/admin/users",icon:r.jsx(m.G,{icon:h.m08,size:"sm"})},{title:"Articles",path:"/admin/articles",icon:r.jsx(m.G,{icon:h.Xgz,size:"sm"})},{title:"Places",path:"/admin/places",icon:r.jsx(m.G,{icon:h.g4A,size:"sm"})},{title:"Tours",path:"/admin/tours",icon:r.jsx(m.G,{icon:h.FpQ,size:"sm"})}]},{title:"Analytics",list:[{title:"Reports",path:"/admin/reports",icon:r.jsx(m.G,{icon:h.koM,size:"sm"})}]},{title:"User",list:[]}];async function v(){await (0,_.w)()}let b=async()=>{let e=(0,p.cookies)(),t=e.get("userID")?.value||null,a=e.get("isAdmin")?.value?await (0,f.readUser)(t):"";return(0,r.jsxs)("div",{className:u().container,children:[(0,r.jsxs)("div",{className:u().user,children:[r.jsx(n.default,{className:u().userImage,src:"/avatar.jpg",alt:"",width:"40",height:"40"}),(0,r.jsxs)("div",{className:u().userDetail,children:[r.jsx("span",{className:u().username,children:a.username}),r.jsx("span",{className:u().userTitle,children:"Administrator"})]})]}),r.jsx("ul",{className:u().list,children:x.map(e=>(0,r.jsxs)("li",{children:[r.jsx("span",{className:u().cat,children:e.title}),e.list.map(e=>r.jsx(l,{item:e},e.title))]},e.title))}),r.jsx("form",{action:(0,s.j)("4c87ede2923bd54ea22c312a3ce4dfea78f026d6",v),children:(0,r.jsxs)("button",{className:u().logout,children:[r.jsx(m.G,{icon:h.jLD,size:"sm"}),"Logout"]})})]})}},45813:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,w:()=>o});var r=a(7439),s=a(867),n=a(46999);let i=async()=>{let e=(0,r.cookies)().get("userID");console.log(e.value);let t=await (0,n.readUser)(e.value);return console.log(t),!0===t.isAdmin},o=()=>{let e=(0,r.cookies)();e.delete("token"),e.delete("isAdmin"),(0,s.redirect)("/login")}},73881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(70337);let s=e=>[{type:"image/x-icon",sizes:"96x96",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},33709:()=>{}};