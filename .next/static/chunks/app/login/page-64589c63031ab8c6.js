(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9890:function(e,r,t){Promise.resolve().then(t.bind(t,8271)),Promise.resolve().then(t.t.bind(t,1126,23))},7907:function(e,r,t){"use strict";var n=t(5313);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},8271:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var n=t(7437),o=t(1903),i=t.n(o);async function a(e,r){try{let t=await fetch("http://159.65.95.44/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!t.ok)throw console.log(t),Error("Failed to log in");return await t.json()}catch(e){throw console.error("Error:",e.message),Error("An error occurred. Please try again later.")}}var s=t(2265),u=t(7907),c=t(146),l=()=>{let[e,r]=(0,s.useState)(""),[t,o]=(0,s.useState)(""),[l,d]=(0,s.useState)(null),f=(0,u.useRouter)(),p=async r=>{r.preventDefault();try{let r=await a(e,t);if(!r){d("Invalid email or password");return}let{token:n,user:o}=r;c.Z.set("token",n),c.Z.set("isAdmin",o[0].isAdmin),c.Z.set("userID",o[0]._id),o[0].isAdmin?f.push("/admin"):d("You do not have admin privileges."),console.log("Login successful!")}catch(e){console.error("Error:",e.message),d("An error occurred. Please try again later.")}};return(0,n.jsxs)("form",{onSubmit:p,className:i().form,children:[(0,n.jsx)("h1",{children:"Login"}),(0,n.jsx)("input",{type:"email",placeholder:"email",name:"email",value:e,onChange:e=>r(e.target.value),required:!0}),(0,n.jsx)("input",{type:"password",placeholder:"password",name:"password",value:t,onChange:e=>o(e.target.value),required:!0}),(0,n.jsx)("button",{type:"submit",children:"Login"}),l&&(0,n.jsx)("div",{style:{color:"red"},children:l})]})}},1903:function(e){e.exports={form:"loginForm_form__KefbG"}},1126:function(e){e.exports={container:"login_container__kitvQ",form:"login_form__NY6Qf"}},146:function(e,r,t){"use strict";/*! js-cookie v3.0.5 | MIT */function n(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)e[n]=t[n]}return e}t.d(r,{Z:function(){return o}});var o=function e(r,t){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=n({},t,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=e+"="+r.write(o,e)+a}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],n={},o=0;o<t.length;o++){var i=t[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=r.read(a,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,r){o(e,"",n({},r,{expires:-1}))},withAttributes:function(r){return e(this.converter,n({},this.attributes,r))},withConverter:function(r){return e(n({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=9890)}),_N_E=e.O()}]);